### Security headers
Header set X-Frame-Options DENY
Header set X-XSS-Protection "1; mode=block"
Header set Content-Security-Policy "img-src 'self' s3.eu-central-1.amazonaws.com; script-src 'self' 'unsafe-inline' s3.eu-central-1.amazonaws.com *.google-analytics.com data:; style-src 'unsafe-inline' s3.eu-central-1.amazonaws.com fonts.googleapis.com; font-src s3.eu-central-1.amazonaws.com fonts.gstatic.com;"
Header set X-Content-Type-Options "nosniff"
Header set Strict-Transport-Security "max-age=10886400000; includeSubdomains" env=HTTPS


### Compression
AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/javascript text/javascript application/json


### Rewrites
RewriteEngine On

# Force https.
RewriteCond %{HTTPS} !=on
RewriteCond %{ENV:HTTPS} !=on
RewriteRule .* https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]

# Answer everything from node.
#RewriteRule ^(.*) http://localhost:61324/ [P]

# If a directory or file exists, use it directly.
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L]

# If a specific route is accessed directly, reply with the appropriate shell.
RewriteRule ^/gesetze/(.*) /static/gesetze.html [NC,L]
RewriteRule ^/gesetz/(.*) /static/gesetz.html [NC,L]
RewriteRule ^/suche/(.*) /static/home.html [NC,L]
RewriteRule ^(.*) /static/home.html [NC,L]


### Authentication
AuthType Basic
AuthName "Private Alpha"
AuthUserFile /var/www/virtual/lawly/.htuser
Order Deny,Allow
Deny from all
Satisfy Any
Allow from env=!HTTPS
Require valid-user
